<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQs</title>
</head>
<body>
    <h1>FAQs</h1>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Add FAQ</button>
    </form>

    <h2>View FAQs in:</h2>
    <select id="languageDropdown" onchange="changeLanguage()">
        <option value="">Select Language</option>
    </select>

    <h2>Existing FAQs</h2>
    <ul>
        {% for faq in faqs %}
            <li>
                <strong>Question:</strong> {{ faq.question }}<br>
                <strong>Answer:</strong> {{ faq.answer|safe }}
            </li>
        {% endfor %}
    </ul>

    <script>
        const languages = {
            "English": "en",
            "Hindi": "hi",
            "Bengali": "bn"
        };

        const dropdown = document.getElementById('languageDropdown');
        const urlParams = new URLSearchParams(window.location.search);
        const selectedLanguage = urlParams.get('lang');

        for (const [key, value] of Object.entries(languages)) {
            const option = document.createElement('option');
            option.value = value;
            option.textContent = key;
            if (value === selectedLanguage) {
                option.selected = true;
            }
            dropdown.appendChild(option);
        }

        function changeLanguage() {
            const selectedLanguage = dropdown.value;
            if (selectedLanguage) {
                window.location.href = `?lang=${selectedLanguage}`;
            }
        }
    </script>
</body>
</html>